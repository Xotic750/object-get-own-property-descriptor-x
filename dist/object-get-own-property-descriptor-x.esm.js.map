{"version":3,"sources":["../src/object-get-own-property-descriptor-x.js"],"names":[],"mappings":"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","file":"object-get-own-property-descriptor-x.esm.js","sourcesContent":["import toObject from 'to-object-x';\nimport toPropertyKey from 'to-property-key-x';\nimport attempt from 'attempt-x';\nimport hasSymbolSupport from 'has-symbol-support-x';\nimport owns from 'has-own-property-x';\nimport isPrimitive from 'is-primitive-x';\nimport isString from 'is-string';\nimport isIndex from 'is-index-x';\nimport propertyIsEnumerable from 'property-is-enumerable-x';\nimport toBoolean from 'to-boolean-x';\nimport methodize from 'simple-methodize-x';\n\nconst EMPTY_STRING = '';\nconst charAt = methodize(EMPTY_STRING.charAt);\nconst ObjectCtr = {}.constructor;\nconst ngopd = ObjectCtr.getOwnPropertyDescriptor;\nconst nativeGOPD = typeof ngopd === 'function' && ngopd;\nlet getOPDFallback1;\nlet getOPDFallback2;\n\n// ES5 15.2.3.3\n// http://es5.github.com/#x15.2.3.3\n\nconst doesGOPDWork = function doesGOPDWork(object, prop) {\n  object[toPropertyKey(prop)] = 0;\n  const testResult = attempt(nativeGOPD, object, prop);\n\n  return testResult.threw === false && testResult.value.value === 0;\n};\n\nconst prototypeOfObject = ObjectCtr.prototype;\n\n// If JS engine supports accessors creating shortcuts.\nconst supportsAccessors = owns(prototypeOfObject, '__defineGetter__');\n/* eslint-disable-next-line no-underscore-dangle */\nconst lookupGetter = supportsAccessors && methodize(prototypeOfObject.__lookupGetter__);\n/* eslint-disable-next-line no-underscore-dangle */\nconst lookupSetter = supportsAccessors && methodize(prototypeOfObject.__lookupSetter__);\n\nexport const implementation = function getOwnPropertyDescriptor(object, property) {\n  const obj = toObject(object);\n  const propKey = toPropertyKey(property);\n\n  let result;\n\n  // make a valiant attempt to use the real getOwnPropertyDescriptor for I8's DOM elements.\n  if (getOPDFallback1) {\n    result = attempt(function attemptee() {\n      return getOPDFallback1(toObject(obj), propKey);\n    });\n\n    if (result.threw === false) {\n      return result.value;\n    }\n    // try the shim if the real one doesn't work\n  }\n\n  const isStringIndex = isString(obj) && isIndex(propKey, obj.length);\n\n  if (getOPDFallback2 && isStringIndex === false) {\n    result = attempt(function attemptee() {\n      return getOPDFallback2(toObject(obj), propKey);\n    });\n\n    if (result.threw === false) {\n      return result.value;\n    }\n    // try the shim if the real one doesn't work\n  }\n\n  /* eslint-disable-next-line no-void */\n  let descriptor = void 0;\n\n  // If object does not owns property return undefined immediately.\n  if (isStringIndex === false && owns(obj, propKey) === false) {\n    return descriptor;\n  }\n\n  // If object has a property then it's for sure `configurable`, and\n  // probably `enumerable`. Detect enumerability though.\n  descriptor = {\n    configurable: isPrimitive(object) === false && isStringIndex === false,\n    enumerable: propertyIsEnumerable(obj, propKey),\n  };\n\n  // If JS engine supports accessor properties then property may be a\n  // getter or setter.\n  if (supportsAccessors) {\n    // Unfortunately `__lookupGetter__` will return a getter even\n    // if object has own non getter property along with a same named\n    // inherited getter. To avoid misbehavior we temporary remove\n    // `__proto__` so that `__lookupGetter__` will return getter only\n    // if it's owned by an object.\n    /* eslint-disable-next-line no-proto */\n    const prototype = obj.__proto__;\n    const notPrototypeOfObject = obj !== prototypeOfObject;\n\n    // avoid recursion problem, breaking in Opera Mini when\n    // Object.getOwnPropertyDescriptor(Object.prototype, 'toString')\n    // or any other Object.prototype accessor\n    if (notPrototypeOfObject) {\n      /* eslint-disable-next-line no-proto */\n      obj.__proto__ = prototypeOfObject;\n    }\n\n    const getter = lookupGetter(obj, propKey);\n    const setter = lookupSetter(obj, propKey);\n\n    if (notPrototypeOfObject) {\n      // Once we have getter and setter we can put values back.\n      /* eslint-disable-next-line no-proto */\n      obj.__proto__ = prototype;\n    }\n\n    if (getter || setter) {\n      if (getter) {\n        descriptor.get = getter;\n      }\n\n      if (setter) {\n        descriptor.set = setter;\n      }\n\n      // If it was accessor property we're done and return here\n      // in order to avoid adding `value` to the descriptor.\n      return descriptor;\n    }\n  }\n\n  // If we got this far we know that object has an own property that is\n  // not an accessor so we set it as a value and return descriptor.\n  if (isStringIndex) {\n    descriptor.value = charAt(obj, propKey);\n    descriptor.writable = false;\n  } else {\n    descriptor.value = obj[propKey];\n    descriptor.writable = true;\n  }\n\n  return descriptor;\n};\n\n/**\n * This method returns a property descriptor for an own property (that is,\n * one directly present on an object and not in the object's prototype chain)\n * of a given object.\n *\n * @param {*} object - The object in which to look for the property.\n * @param {*} property - The name of the property whose description is to be retrieved.\n * @returns {object} A property descriptor of the given property if it exists on the object, undefined otherwise.\n */\nlet $getOwnPropertyDescriptor;\n\n// check whether getOwnPropertyDescriptor works if it's given. Otherwise, shim partially.\nif (nativeGOPD) {\n  const doc = typeof document !== 'undefined' && document;\n  const getOPDWorksOnDom = doc ? doesGOPDWork(doc.createElement('div'), 'sentinel') : true;\n\n  if (getOPDWorksOnDom) {\n    const res = attempt(nativeGOPD, toObject('abc'), 1);\n    const worksWithStr = res.threw === false && res.value && res.value.value === 'b';\n\n    if (worksWithStr) {\n      const getOPDWorksOnObject = doesGOPDWork({}, 'sentinel');\n\n      if (getOPDWorksOnObject) {\n        const worksWithPrim = attempt(nativeGOPD, 42, 'name').threw === false;\n        /* eslint-disable-next-line compat/compat */\n        const worksWithObjSym = hasSymbolSupport && doesGOPDWork({}, toObject(Symbol(EMPTY_STRING)));\n\n        if (worksWithObjSym) {\n          if (worksWithPrim) {\n            $getOwnPropertyDescriptor = nativeGOPD;\n          } else {\n            $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n              return nativeGOPD(toObject(object), property);\n            };\n          }\n        } else if (worksWithPrim) {\n          $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n            return nativeGOPD(object, toPropertyKey(property));\n          };\n        } else {\n          $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n            return nativeGOPD(toObject(object), toPropertyKey(property));\n          };\n        }\n      } else {\n        getOPDFallback1 = nativeGOPD;\n      }\n    } else {\n      getOPDFallback2 = nativeGOPD;\n    }\n  }\n}\n\nif (toBoolean($getOwnPropertyDescriptor) === false || getOPDFallback1 || getOPDFallback2) {\n  $getOwnPropertyDescriptor = implementation;\n}\n\nconst gOPS = $getOwnPropertyDescriptor;\n\nexport default gOPS;\n"]}
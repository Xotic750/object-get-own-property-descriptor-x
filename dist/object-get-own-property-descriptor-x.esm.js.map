{"version":3,"sources":["../src/object-get-own-property-descriptor-x.js"],"names":[],"mappings":"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","file":"object-get-own-property-descriptor-x.esm.js","sourcesContent":["import toObject from 'to-object-x';\nimport toPropertyKey from 'to-property-key-x';\nimport attempt from 'attempt-x';\nimport hasSymbolSupport from 'has-symbol-support-x';\nimport owns from 'has-own-property-x';\nimport isPrimitive from 'is-primitive';\nimport isString from 'is-string';\nimport isIndex from 'is-index-x';\nimport propertyIsEnumerable from 'property-is-enumerable-x';\n\n/** @type {ObjectConstructor} */\nconst castObject = {}.constructor;\n/** @type {BooleanConstructor} */\nconst castBoolean = true.constructor;\nconst nativeGOPD = typeof castObject.getOwnPropertyDescriptor === 'function' && castObject.getOwnPropertyDescriptor;\nlet getOPDFallback1;\nlet getOPDFallback2;\n\n// ES5 15.2.3.3\n// http://es5.github.com/#x15.2.3.3\n\nconst doesGOPDWork = function doesGOPDWork(object, prop) {\n  object[toPropertyKey(prop)] = 0;\n  const testResult = attempt(nativeGOPD, object, prop);\n\n  return testResult.threw === false && testResult.value.value === 0;\n};\n\n// check whether getOwnPropertyDescriptor works if it's given. Otherwise, shim partially.\n/**\n * This method returns a property descriptor for an own property (that is,\n * one directly present on an object and not in the object's prototype chain)\n * of a given object.\n *\n * @param {*} object - The object in which to look for the property.\n * @param {*} property - The name of the property whose description is to be retrieved.\n * @returns {object} A property descriptor of the given property if it exists on the object, undefined otherwise.\n */\nlet $getOwnPropertyDescriptor;\n\nif (nativeGOPD) {\n  const doc = typeof document !== 'undefined' && document;\n  const getOPDWorksOnDom = doc ? doesGOPDWork(doc.createElement('div'), 'sentinel') : true;\n\n  if (getOPDWorksOnDom) {\n    const res = attempt(nativeGOPD, castObject('abc'), 1);\n    const worksWithStr = res.threw === false && res.value && res.value.value === 'b';\n\n    if (worksWithStr) {\n      const getOPDWorksOnObject = doesGOPDWork({}, 'sentinel');\n\n      if (getOPDWorksOnObject) {\n        const worksWithPrim = attempt(nativeGOPD, 42, 'name').threw === false;\n        /* eslint-disable-next-line compat/compat */\n        const worksWithObjSym = hasSymbolSupport && doesGOPDWork({}, castObject(Symbol('')));\n\n        if (worksWithObjSym) {\n          if (worksWithPrim) {\n            $getOwnPropertyDescriptor = nativeGOPD;\n          } else {\n            $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n              return nativeGOPD(toObject(object), property);\n            };\n          }\n        } else if (worksWithPrim) {\n          $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n            return nativeGOPD(object, toPropertyKey(property));\n          };\n        } else {\n          $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n            return nativeGOPD(toObject(object), toPropertyKey(property));\n          };\n        }\n      } else {\n        getOPDFallback1 = nativeGOPD;\n      }\n    } else {\n      getOPDFallback2 = nativeGOPD;\n    }\n  }\n}\n\nif (castBoolean($getOwnPropertyDescriptor) === false || getOPDFallback1 || getOPDFallback2) {\n  const prototypeOfObject = castObject.prototype;\n\n  // If JS engine supports accessors creating shortcuts.\n  let lookupGetter;\n  let lookupSetter;\n  const supportsAccessors = owns(prototypeOfObject, '__defineGetter__');\n\n  if (supportsAccessors) {\n    /* eslint-disable-next-line no-underscore-dangle */\n    const lg = prototypeOfObject.__lookupGetter__;\n    /* eslint-disable-next-line no-underscore-dangle */\n    const ls = prototypeOfObject.__lookupSetter__;\n    lookupGetter = function $lookupGetter(object, property) {\n      return lg.call(object, property);\n    };\n\n    lookupSetter = function $lookupSetter(object, property) {\n      return ls.call(object, property);\n    };\n  }\n\n  $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n    const obj = toObject(object);\n    const propKey = toPropertyKey(property);\n\n    let result;\n\n    // make a valiant attempt to use the real getOwnPropertyDescriptor for I8's DOM elements.\n    if (getOPDFallback1) {\n      result = attempt.call(castObject, getOPDFallback1, obj, propKey);\n\n      if (result.threw === false) {\n        return result.value;\n      }\n      // try the shim if the real one doesn't work\n    }\n\n    const isStringIndex = isString(obj) && isIndex(propKey, obj.length);\n\n    if (getOPDFallback2 && isStringIndex === false) {\n      result = attempt.call(castObject, getOPDFallback2, obj, propKey);\n\n      if (result.threw === false) {\n        return result.value;\n      }\n      // try the shim if the real one doesn't work\n    }\n\n    /* eslint-disable-next-line no-void */\n    let descriptor = void 0;\n\n    // If object does not owns property return undefined immediately.\n    if (isStringIndex === false && owns(obj, propKey) === false) {\n      return descriptor;\n    }\n\n    // If object has a property then it's for sure `configurable`, and\n    // probably `enumerable`. Detect enumerability though.\n    descriptor = {\n      configurable: isPrimitive(object) === false && isStringIndex === false,\n      enumerable: propertyIsEnumerable(obj, propKey),\n    };\n\n    // If JS engine supports accessor properties then property may be a\n    // getter or setter.\n    if (supportsAccessors) {\n      // Unfortunately `__lookupGetter__` will return a getter even\n      // if object has own non getter property along with a same named\n      // inherited getter. To avoid misbehavior we temporary remove\n      // `__proto__` so that `__lookupGetter__` will return getter only\n      // if it's owned by an object.\n      /* eslint-disable-next-line no-proto */\n      const prototype = obj.__proto__;\n      const notPrototypeOfObject = obj !== prototypeOfObject;\n\n      // avoid recursion problem, breaking in Opera Mini when\n      // Object.getOwnPropertyDescriptor(Object.prototype, 'toString')\n      // or any other Object.prototype accessor\n      if (notPrototypeOfObject) {\n        /* eslint-disable-next-line no-proto */\n        obj.__proto__ = prototypeOfObject;\n      }\n\n      const getter = lookupGetter(obj, propKey);\n      const setter = lookupSetter(obj, propKey);\n\n      if (notPrototypeOfObject) {\n        // Once we have getter and setter we can put values back.\n        /* eslint-disable-next-line no-proto */\n        obj.__proto__ = prototype;\n      }\n\n      if (getter || setter) {\n        if (getter) {\n          descriptor.get = getter;\n        }\n\n        if (setter) {\n          descriptor.set = setter;\n        }\n\n        // If it was accessor property we're done and return here\n        // in order to avoid adding `value` to the descriptor.\n        return descriptor;\n      }\n    }\n\n    // If we got this far we know that object has an own property that is\n    // not an accessor so we set it as a value and return descriptor.\n    if (isStringIndex) {\n      descriptor.value = obj.charAt(propKey);\n      descriptor.writable = false;\n    } else {\n      descriptor.value = obj[propKey];\n      descriptor.writable = true;\n    }\n\n    return descriptor;\n  };\n}\n\nconst gOPS = $getOwnPropertyDescriptor;\n\nexport default gOPS;\n"]}